<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">
<style>
@page {
size: A4;
margin: 2cm;
@frame header {
-pdf-frame-content: page-header;
top: 1cm;
left: 2cm;
right: 2cm;
height: 3cm;
}
@frame footer {
-pdf-frame-content: page-footer;
bottom: 1cm;
left: 2cm;
right: 2cm;
height: 1cm;
}
}
body {
font-family: 'Merriweather', serif; /* Fonte para o corpo do texto /
font-size: 11pt;
color: #333;
background-color: #f8f8f8;
}
h1, h2, h3 {
font-family: 'Oswald', sans-serif; / Fontes para títulos /
color: #224574; / Azul mais escuro /
margin-top: 10px;
margin-bottom: 5px;
line-height: 1.2;
}
h1 { font-size: 24pt; text-align: center; margin-bottom: 20px; }
h2 { font-size: 18pt; border-bottom: 2px solid #ddd; padding-bottom: 5px; }
h3 { font-size: 14pt; }
.header-table {
width: 100%;
border-bottom: 1px solid #ccc;
padding-bottom: 10px;
margin-bottom: 15px;
}
.header-table td {
vertical-align: middle;
}
.logo {
width: 80px;
}
.header-title {
text-align: center;
}
.footer-content {
text-align: right;
font-size: 9pt;
color: #777;
}
.ocorrencia-block {
margin-bottom: 25px;
padding: 15px;
background-color: white;
border: 1px solid #ddd;
border-radius: 8px;
box-shadow: 2px 2px 5px #eee;
page-break-inside: avoid;
}
.ocorrencia-title {
color: #b3261e; / Vermelho tijolo */
font-size: 16pt;
font-family: 'Oswald', sans-serif;
margin-bottom: 10px;
border-bottom: 2px solid #e0e0e0;
padding-bottom: 8px;
}
.info-row {
display: flex;
margin-bottom: 8px;
}
.info-label {
font-weight: bold;
color: #555;
width: 150px;
flex-shrink: 0;
}
.info-value {
flex-grow: 1;
}
.description-title {
font-weight: bold;
color: #555;
margin-top: 15px;
margin-bottom: 5px;
}
.description-text {
text-align: justify;
line-height: 1.5;
}
.ocorrencia-image {
max-width: 100%;
height: auto;
margin-top: 10px;
border: 1px solid #ccc;
border-radius: 4px;
}
</style>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Oswald:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
<div id="page-header">
<table class="header-table">
<tr>
<td style="width: 100px;"><img src="{{ coppm_logo_path }}" class="logo"></td>
<td class="header-title">
<h3>POLÍCIA MILITAR DA BAHIA</h3>
<h2>Comando de Operações Policiais Militares - COPPM</h2>
</td>
<td style="width: 100px; text-align: right;"><img src="{{ pmba_logo_path }}" class="logo"></td>
</tr>
</table>
</div>

<div id="page-footer">
    <p class="footer-content">Página <pdf:pagenumber> de <pdf:pagecount></p>
</div>

<h1>CADERNO INFORMATIVO DE OCORRÊNCIAS</h1>

{% for ocorrencia in ocorrencias %}
    <div class="ocorrencia-block">
        <h2 class="ocorrencia-title">
            {{ ocorrencia.tipo_ocorrencia.nome|upper }} - Nº {{ ocorrencia.id }}
        </h2>
        <div class="info-row">
            <div class="info-label">Data/Hora do Fato:</div>
            <div class="info-value">{{ ocorrencia.data_fato|date:"d/m/Y H:i" }}</div>
        </div>
        <div class="info-row">
            <div class="info-label">Local:</div>
            <div class="info-value">{{ ocorrencia.cidade }} / {{ ocorrencia.bairro }}</div>
        </div>
        <div class="info-row">
            <div class="info-label">RISP / AISP / OPM:</div>
            <div class="info-value">
                {% if ocorrencia.risp_area %}{{ ocorrencia.risp_area.nome }}{% endif %} /
                {% if ocorrencia.aisp_area %}{{ ocorrencia.aisp_area.nome }}{% endif %} /
                {% if ocorrencia.opm_area %}{{ ocorrencia.opm_area.nome }}{% endif %}
            </div>
        </div>

        {% if ocorrencia.imagem.url %}
            <img src="{{ ocorrencia.imagem.url }}" alt="Imagem da Ocorrência" class="ocorrencia-image">
        {% endif %}

        <h3 class="description-title">DESCRIÇÃO DO FATO:</h3>
        <p class="description-text">{{ ocorrencia.descricao_fato|linebreaksbr }}</p>
    </div>
{% endfor %}
</body>
</html>
